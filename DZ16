using System;
using System.Collections.Generic;

class Program
{
    private static Dictionary<string, List<string>> positions = new Dictionary<string, List<string>>();

    static void Main()
    {
        const string CommandAddEmployee = "1";
        const string CommandRemoveEmployee = "2";
        const string CommandShowAllEmployees = "3";
        const string CommandExit = "4";

        bool isRunning = true;

        while (isRunning)
        {
            Console.WriteLine("\nМеню:");
            Console.WriteLine($"{CommandAddEmployee}. Добавить сотрудника");
            Console.WriteLine($"{CommandRemoveEmployee}. Удалить сотрудника");
            Console.WriteLine($"{CommandShowAllEmployees}. Показать всех сотрудников");
            Console.WriteLine($"{CommandExit}. Выйти");
            Console.Write("Выберите действие: ");

            string input = Console.ReadLine();

            switch (input)
            {
                case CommandAddEmployee:
                    AddEmployee();
                    break;

                case CommandRemoveEmployee:
                    RemoveEmployee();
                    break;

                case CommandShowAllEmployees:
                    DisplayAllEmployees();
                    break;

                case CommandExit:
                    isRunning = false;
                    break;

                default:
                    Console.WriteLine("Неверный ввод");
                    break;
            }
        }
    }

    static void AddEmployee()
    {
        Console.Write("Введите должность: ");
        string position = Console.ReadLine();

        Console.Write("Введите ФИО сотрудника: ");
        string name = Console.ReadLine();

        if (positions.ContainsKey(position) == false)
        {
            positions[position] = new List<string>();
        }

        positions[position].Add(name);
        Console.WriteLine($"Сотрудник {name} добавлен на должность {position}.");
    }

    static void RemoveEmployee()
    {
        if (positions.Count == 0)
        {
            Console.WriteLine("Нет данных о сотрудниках");
            return;
        }

        Console.WriteLine("Выберите должность:");

        int i = 1;
        var positionList = new List<string>(positions.Keys);

        foreach (var position in positionList)
        {
            Console.WriteLine($"{i}. {position}");
            i++;
        }

        if (int.TryParse(Console.ReadLine(), out int positionIndex) &&
            positionIndex > 0 && positionIndex <= positionList.Count)
        {
            string selectedPosition = positionList[positionIndex - 1];

            Console.WriteLine("Выберите сотрудника для удаления:");
            for (i = 0; i < positions[selectedPosition].Count; i++)
            {
                Console.WriteLine($"{i + 1}. {positions[selectedPosition][i]}");
            }

            if (int.TryParse(Console.ReadLine(), out int employeeIndex) &&
                employeeIndex > 0 && employeeIndex <= positions[selectedPosition].Count)
            {
                string removedEmployee = positions[selectedPosition][employeeIndex - 1];
                positions[selectedPosition].RemoveAt(employeeIndex - 1);
                Console.WriteLine($"Сотрудник {removedEmployee} удалён с должности {selectedPosition}.");

                if (positions[selectedPosition].Count == 0)
                {
                    positions.Remove(selectedPosition);
                    Console.WriteLine($"Должность {selectedPosition} удалена, так как в ней не осталось сотрудников.");
                }
            }
            else
            {
                Console.WriteLine("Неверный номер сотрудника!");
            }
        }
        else
        {
            Console.WriteLine("Неверный номер должности!");
        }
    }

    static void DisplayAllEmployees()
    {
        if (positions.Count == 0)
        {
            Console.WriteLine("Нет данных о сотрудниках");
            return;
        }

        foreach (var position in positions)
        {
            Console.WriteLine($"\nДолжность: {position.Key}");
            Console.WriteLine("Сотрудники:");

            foreach (var employee in position.Value)
            {
                Console.WriteLine($"- {employee}");
            }
        }
    }
}
