using System;
using System.Collections.Generic;

class Program
{
    static void Main(string[] args)
    {
        var enclosures = new List<Enclosure>
        {
            CreateEnclosure("Львы", "Рычание", "Саванна", "Лев", "самец", 3),
            CreateEnclosure("Пингвины", "Крики", "Антарктика", "Пингвин", new[] {"самец", "самка"}, 10),
            CreateEnclosure("Обезьяны", "У-у-у-а-а-а!", "Джунгли", "Обезьяна", new[] {"самец", "самка"}, 5),
            CreateEnclosure("Зебры", "Фырканье", "Саванна", "Зебра", "самка", 4)
        };

        Zoo zoo = new Zoo(enclosures);
        zoo.Run();
    }

    private static Enclosure CreateEnclosure(string animalType, string sound, string habitat,
                                          string species, string gender, int count)
    {
        var animals = new List<Animal>();

        for (int i = 0; i < count; i++)
        {
            animals.Add(new Animal(species, gender));
        }
        return new Enclosure(new Sign(animalType, sound, habitat), animals);
    }

    private static Enclosure CreateEnclosure(string animalType, string sound, string habitat,
                                          string species, string[] genders, int count)
    {
        var animals = new List<Animal>();

        for (int i = 0; i < count; i++)
        {
            string gender = genders[i % genders.Length];
            animals.Add(new Animal(species, gender));
        }

        return new Enclosure(new Sign(animalType, sound, habitat), animals);
    }
}

class Zoo
{
    private const string CommandExit = "0";
    private readonly List<Enclosure> _enclosures;

    public Zoo(List<Enclosure> enclosures)
    {
        _enclosures = enclosures;
    }

    public void Run()
    {
        Console.WriteLine("Добро пожаловать в зоопарк");

        bool isRunning = true;

        while (isRunning)
        {
            ShowEnclosuresMenu();
            isRunning = ProcessUserInput();
        }

        Console.WriteLine("До свидания");
    }

    private void ShowEnclosuresMenu()
    {
        Console.WriteLine("\nВыберите вольер для просмотра (введите номер):");

        for (int i = 0; i < _enclosures.Count; i++)
        {
            Console.WriteLine($"{i + 1}. {_enclosures[i].AnimalType}");
        }

        Console.WriteLine($"{CommandExit}. Выход из зоопарка");
    }

    private bool ProcessUserInput()
    {
        string input = Console.ReadLine();

        if (input == CommandExit)
        {
            return false;
        }

        if (int.TryParse(input, out int choice) && choice > 0 && choice <= _enclosures.Count)
        {
            _enclosures[choice - 1].DisplayInfo();
        }
        else
        {
            Console.WriteLine("Некорректный ввод. Попробуйте еще раз.");
        }

        return true;
    }
}

class Enclosure
{
    private List<Animal> _animals;

    public Enclosure(Sign sign, List<Animal> animals)
    {
        Sign = sign;
        _animals = animals;
    }

    public Sign Sign { get; }
    public string AnimalType => Sign.animalType;

    public void DisplayInfo()
    {
        Console.WriteLine("\n=== Информация о вольере ===");

        Sign.DisplayInfo();

        Console.WriteLine($"Количество животных: {_animals.Count}");
        Console.WriteLine($"Пол животных: {GetGenderDescription()}");
        Console.WriteLine("============================");
    }

    private string GetGenderDescription()
    {
        int males = 0;
        int females = 0;

        foreach (var animal in _animals)
        {
            if (animal.IsMale)
                males++;
            else
                females++;
        }

        if (males > 0 && females > 0)
            return "самцы и самки";
        else if (males > 0)
            return "самцы";
        else
            return "самки";
    }
}

class Sign
{
    private string _sound;
    private string _habitat;

    public Sign(string animalType, string sound, string habitat)
    {
        this.animalType = animalType;
        _sound = sound;
        _habitat = habitat;
    }

    public string animalType { get; }

    public void DisplayInfo()
    {
        Console.WriteLine($"Тип животных: {animalType}");
        Console.WriteLine($"Среда обитания: {_habitat}");
        Console.WriteLine($"Звук: {_sound}");
    }
}

class Animal
{
    private const string MaleGender = "самец";

    public Animal(string species, string gender)
    {
        Species = species;
        Gender = gender;
    }

    public string Species { get; }
    public string Gender { get; }
    public bool IsMale => Gender == MaleGender;
}
